{% extends "base.html" %}

{% block title %}
	{% if lang == 'uz' %}Muvaffaqiyat hikoyalari - Study Fans{% elif lang == 'ru' %}–ò—Å—Ç–æ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ - Study Fans{% elif lang == 'tr' %}Ba≈üarƒ± hikayeleri - Study Fans{% else %}Success Stories - Study Fans{% endif %}
{% endblock %}

{% block extra_css %}
<style>
	.stories-hero {
		background: white;
		padding: 3rem 0 2rem;
		text-align: center;
		border-bottom: 1px solid #e5e7eb;
	}
	.stories-hero h1 {
		font-size: 1.75rem;
		font-weight: 600;
		color: #111;
		margin-bottom: 0.75rem;
		font-family: 'Inter', sans-serif;
	}
	.stories-hero .subtext {
		font-size: 0.9rem;
		color: #6b7280;
		max-width: 700px;
		margin: 0 auto 0.5rem;
		line-height: 1.6;
	}
	.stories-hero .small-text {
		font-size: 0.8rem;
		color: #9ca3af;
	}
	.filter-panel {
		background: white;
		border-radius: 16px;
		padding: 1.25rem;
		margin-bottom: 1.5rem;
		border: 1px solid #e5e7eb;
	}
	.filter-panel-title {
		font-size: 0.9rem;
		font-weight: 600;
		color: #111;
		margin-bottom: 1rem;
	}
	.filter-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
		gap: 0.75rem;
	}
	.filter-select {
		padding: 0.5rem 0.75rem;
		border: 1px solid #e5e7eb;
		border-radius: 8px;
		font-size: 0.8rem;
		color: #111;
		background: white;
		cursor: pointer;
	}
	.filter-select:focus {
		outline: none;
		border-color: #2563eb;
	}
	.cases-grid {
		display: grid;
		grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
		gap: 1.25rem;
		margin-bottom: 3rem;
	}
	.case-card {
		background: white;
		border-radius: 32px;
		overflow: hidden;
		border: 0.1px solid #e5e7eb;
		transition: all 0.2s ease;
		cursor: pointer;
	}
	.case-card:hover {
		border-color: #2563eb;
	}
	.case-video-preview {
		width: 100%;
		height: 160px;
		background: #f3f4f6;
		position: relative;
		overflow: hidden;
	}
	.case-video-preview video {
		width: 100%;
		height: 100%;
		object-fit: cover;
	}
	.case-video-placeholder {
		width: 100%;
		height: 100%;
		display: flex;
		align-items: center;
		justify-content: center;
		background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
		color: white;
		font-size: 2rem;
		font-weight: 600;
	}
	.case-content {
		padding: 1rem;
	}
	.case-number {
		font-size: 0.65rem;
		font-weight: 500;
		color: #9ca3af;
		text-transform: uppercase;
		letter-spacing: 0.05em;
		margin-bottom: 0.25rem;
	}
	.case-name {
		font-size: 1rem;
		font-weight: 600;
		color: #111;
		margin-bottom: 0.5rem;
	}
	.case-info {
		font-size: 0.8rem;
		color: #6b7280;
		margin-bottom: 0.5rem;
	}
	.case-result {
		margin-bottom: 0.75rem;
		font-size: 0.8rem;
		color: #2563eb;
	}
	.case-view-btn {
		width: 100%;
		padding: 0.6rem;
		background: #000000;
		color: white;
		border: none;
		border-radius: 20rem;
		font-size: 0.8rem;
		font-weight: 500;
		cursor: pointer;
		transition: background 0.2s;
	}
	.case-view-btn:hover {
		background:rgba(0, 0, 0, 0.48);
	}
	
	/* Bottom Sheet Styles (Mobile Only) */
	.bottom-sheet-overlay {
		display: none;
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background: rgba(0,0,0,0.5);
		z-index: 10000;
	}
	.bottom-sheet-overlay.active {
		display: block;
	}
	.bottom-sheet {
		position: fixed;
		bottom: 0;
		left: 0;
		right: 0;
		background: white;
		border-radius: 24px 24px 0 0;
		max-height: 95vh;
		transform: translateY(100%);
		transition: transform 0.3s ease;
		z-index: 10001;
		display: flex;
		flex-direction: column;
	}
	.bottom-sheet.active {
		transform: translateY(0);
	}
	.bottom-sheet-handle {
		width: 40px;
		height: 4px;
		background: #d1d5db;
		border-radius: 2px;
		margin: 12px auto;
	}
	.bottom-sheet-header {
		padding: 0 1.25rem 1rem;
		border-bottom: 1px solid #e5e7eb;
		display: flex;
		justify-content: space-between;
		align-items: center;
	}
	.bottom-sheet-title {
		font-size: 1rem;
		font-weight: 600;
		color: #111;
	}
	.bottom-sheet-close {
		width: 32px;
		height: 32px;
		border-radius: 50%;
		background: #f3f4f6;
		border: none;
		cursor: pointer;
		display: flex;
		align-items: center;
		justify-content: center;
	}
	.bottom-sheet-content {
		flex: 1;
		overflow-y: auto;
		padding: 1.25rem;
	}
	.bs-section {
		margin-bottom: 1.25rem;
	}
	.bs-section-title {
		font-size: 0.9rem;
		font-weight: 600;
		color: #111;
		margin-bottom: 0.75rem;
	}
	.bs-video {
		width: 100%;
		border-radius: 12px;
		margin-bottom: 0.5rem;
	}
	.bs-text {
		font-size: 0.85rem;
		color: #6b7280;
		font-style: italic;
		line-height: 1.5;
	}
	.bs-profile {
		background: #f8fafc;
		border-radius: 12px;
		padding: 1rem;
		border: 1px solid #e2e8f0;
	}
	.bs-profile-name {
		font-size: 1.1rem;
		font-weight: 600;
		color: #111;
		margin-bottom: 0.75rem;
	}
	.bs-profile-grid {
		display: grid;
		grid-template-columns: 1fr 1fr;
		gap: 0.75rem;
	}
	.bs-profile-item {
		display: flex;
		flex-direction: column;
		gap: 0.15rem;
	}
	.bs-profile-label {
		font-size: 0.65rem;
		font-weight: 500;
		color: #9ca3af;
		text-transform: uppercase;
	}
	.bs-profile-value {
		font-size: 0.8rem;
		font-weight: 500;
		color: #111;
	}
	.bs-screenshots {
		display: flex;
		gap: 0.75rem;
		overflow-x: auto;
		padding-bottom: 0.5rem;
	}
	.bs-screenshot {
		flex: 0 0 auto;
		width: 120px;
		background: #f3f4f6;
		border-radius: 8px;
		padding: 0.75rem;
		text-align: center;
	}
	.bs-screenshot-icon {
		font-size: 1.5rem;
		margin-bottom: 0.25rem;
	}
	.bs-screenshot-label {
		font-size: 0.7rem;
		color: #6b7280;
	}
	.bs-testimonial {
		background: #fef3c7;
		border-radius: 12px;
		padding: 1rem;
		border: 1px solid #fde68a;
	}
	.bs-testimonial-text {
		font-size: 0.85rem;
		color: #92400e;
		line-height: 1.5;
		font-style: italic;
	}
	.bs-conclusion {
		background: #eff6ff;
		border-radius: 12px;
		padding: 1rem;
		border: 1px solid #bfdbfe;
	}
	.bs-conclusion-text {
		font-size: 0.85rem;
		color: #1e40af;
		line-height: 1.5;
	}
	.bs-cta {
		background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
		border-radius: 12px;
		padding: 1.25rem;
		text-align: center;
	}
	.bs-cta-title {
		font-size: 1rem;
		font-weight: 600;
		color: white;
		margin-bottom: 0.75rem;
	}
	.bs-cta-buttons {
		display: flex;
		flex-direction: column;
		gap: 0.5rem;
	}
	.bs-cta-btn {
		padding: 0.6rem;
		background: white;
		color: #2563eb;
		border: none;
		border-radius: 10px;
		font-weight: 500;
		font-size: 0.85rem;
		text-decoration: none;
		text-align: center;
	}
	
	/* Social Proof */
	.social-proof {
		background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
		border-radius: 20px;
		padding: 2rem;
		text-align: center;
	}
	.social-proof-title {
		font-size: 1.25rem;
		font-weight: 600;
		color: #111;
		margin-bottom: 1.5rem;
	}
	.social-proof-stats {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
		gap: 1.5rem;
		margin-bottom: 1.5rem;
	}
	.stat-number {
		font-size: 1.75rem;
		font-weight: 700;
		color: #2563eb;
	}
	.stat-label {
		font-size: 0.8rem;
		color: #6b7280;
	}
	.social-proof-text {
		font-size: 0.9rem;
		color: #6b7280;
	}
	
	@media (max-width: 768px) {
		.stories-hero h1 { font-size: 1.5rem; }
		.cases-grid { grid-template-columns: 1fr; }
		.filter-grid { grid-template-columns: 1fr 1fr; }
	}
</style>
{% endblock %}

{% block content %}
<div class="page-container" style="margin-top: 0; padding-top: 0;">
	<!-- Hero Section -->
	<section class="stories-hero">
		<div class="max-w-7xl mx-auto px-6">
			<h1>{% if lang == 'uz' %}Haqiqiy mijozlar. Haqiqiy natijalar. Mutaxassis izohi bilan.{% elif lang == 'ru' %}–†–µ–∞–ª—å–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç—ã. –†–µ–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã. –° –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–º —ç–∫—Å–ø–µ—Ä—Ç–∞.{% elif lang == 'tr' %}Ger√ßek m√º≈üteriler. Ger√ßek sonu√ßlar. Uzman yorumu ile.{% else %}Real clients. Real results. With expert commentary.{% endif %}</h1>
			<p class="subtext">{% if lang == 'uz' %}Biz har bir CASE'da ‚Äì StudyFans mutaxassisi, mijoz ismi, natija skrinshoti va mijozning o'zi bilan natijani to'liq ko'rsatamiz.{% elif lang == 'ru' %}–í –∫–∞–∂–¥–æ–º CASE –º—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º StudyFans, –∏–º–µ–Ω–µ–º –∫–ª–∏–µ–Ω—Ç–∞, —Å–∫—Ä–∏–Ω—à–æ—Ç–∞–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.{% elif lang == 'tr' %}Her CASE'de StudyFans uzmanƒ±, m√º≈üteri adƒ±, sonu√ß ekran g√∂r√ºnt√ºleri ile sonucu tam olarak g√∂steriyoruz.{% else %}In each CASE we fully show the result with StudyFans specialist, client name, result screenshots.{% endif %}</p>
			<p class="small-text">{% if lang == 'uz' %}Talabalik qabulidan boshlab ikamet, turar-joy va viza masalalarigacha ‚Äì mutaxassislar qanday yordam berganini ko'ring.{% elif lang == 'ru' %}–û—Ç –ø—Ä–∏–µ–º–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –¥–æ –≤–∏–¥–∞ –Ω–∞ –∂–∏—Ç–µ–ª—å—Å—Ç–≤–æ –∏ –≤–∏–∑—ã ‚Äì —Å–º–æ—Ç—Ä–∏—Ç–µ, –∫–∞–∫ –ø–æ–º–æ–≥–ª–∏ –Ω–∞—à–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—ã.{% elif lang == 'tr' %}√ñƒürenci kabul√ºnden ikamet ve vize konularƒ±na kadar ‚Äì uzmanlarƒ±mƒ±zƒ±n nasƒ±l yardƒ±m ettiƒüini g√∂r√ºn.{% else %}From student admission to residence permit and visa issues ‚Äì see how our experts helped.{% endif %}</p>
		</div>
	</section>

	<!-- Filter Panel -->
	<section class="py-6 bg-white">
		<div class="max-w-7xl mx-auto px-6">
			<div class="filter-panel">
				<h3 class="filter-panel-title">{% if lang == 'uz' %}Qaysi xizmat bo'yicha case ko'rmoqchisiz?{% elif lang == 'ru' %}–ö–∞–∫–æ–π –∫–µ–π—Å —Ö–æ—Ç–∏—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å?{% elif lang == 'tr' %}Hangi vaka g√∂rmek istiyorsunuz?{% else %}Which case would you like to see?{% endif %}</h3>
				<div class="filter-grid">
					<select class="filter-select" id="filterService">
						<option value="">{% if lang == 'uz' %}Xizmat turi{% elif lang == 'ru' %}–¢–∏–ø —É—Å–ª—É–≥–∏{% elif lang == 'tr' %}Hizmet t√ºr√º{% else %}Service type{% endif %}</option>
						<option value="admission">{% if lang == 'uz' %}Qabul{% elif lang == 'ru' %}–ü—Ä–∏–µ–º{% elif lang == 'tr' %}Kabul{% else %}Admission{% endif %}</option>
						<option value="residence">{% if lang == 'uz' %}ƒ∞kamet{% elif lang == 'ru' %}–í–∏–¥ –Ω–∞ –∂–∏—Ç–µ–ª—å—Å—Ç–≤–æ{% elif lang == 'tr' %}ƒ∞kamet{% else %}Residence{% endif %}</option>
						<option value="visa">{% if lang == 'uz' %}Viza{% elif lang == 'ru' %}–í–∏–∑–∞{% elif lang == 'tr' %}Vize{% else %}Visa{% endif %}</option>
						<option value="accommodation">{% if lang == 'uz' %}Turar-joy{% elif lang == 'ru' %}–ñ–∏–ª—å–µ{% elif lang == 'tr' %}Konaklama{% else %}Accommodation{% endif %}</option>
					</select>
					<select class="filter-select" id="filterMajor">
						<option value="">{% if lang == 'uz' %}Yo'nalish{% elif lang == 'ru' %}–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ{% elif lang == 'tr' %}B√∂l√ºm{% else %}Major{% endif %}</option>
						<option value="medicine">{% if lang == 'uz' %}Tibbiyot{% elif lang == 'ru' %}–ú–µ–¥–∏—Ü–∏–Ω–∞{% elif lang == 'tr' %}Tƒ±p{% else %}Medicine{% endif %}</option>
						<option value="it">IT</option>
						<option value="business">{% if lang == 'uz' %}Biznes{% elif lang == 'ru' %}–ë–∏–∑–Ω–µ—Å{% elif lang == 'tr' %}ƒ∞≈ületme{% else %}Business{% endif %}</option>
						<option value="psychology">{% if lang == 'uz' %}Psixologiya{% elif lang == 'ru' %}–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è{% elif lang == 'tr' %}Psikoloji{% else %}Psychology{% endif %}</option>
					</select>
					<select class="filter-select" id="filterUniversity">
						<option value="">{% if lang == 'uz' %}Universitet{% elif lang == 'ru' %}–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç{% elif lang == 'tr' %}√úniversite{% else %}University{% endif %}</option>
						<option value="igu">IGU</option>
						<option value="kent">Kent</option>
						<option value="atlas">Atlas</option>
						<option value="okan">Okan</option>
					</select>
					<select class="filter-select" id="filterFormat">
						<option value="">{% if lang == 'uz' %}Format{% elif lang == 'ru' %}–§–æ—Ä–º–∞—Ç{% elif lang == 'tr' %}Format{% else %}Format{% endif %}</option>
						<option value="video">{% if lang == 'uz' %}Video otziv{% elif lang == 'ru' %}–í–∏–¥–µ–æ –æ—Ç–∑—ã–≤{% elif lang == 'tr' %}Video yorum{% else %}Video review{% endif %}</option>
						<option value="image">{% if lang == 'uz' %}Rasm otziv{% elif lang == 'ru' %}–§–æ—Ç–æ –æ—Ç–∑—ã–≤{% elif lang == 'tr' %}Fotoƒüraf yorum{% else %}Image review{% endif %}</option>
						<option value="expert">{% if lang == 'uz' %}Mutaxassis izohi{% elif lang == 'ru' %}–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —ç–∫—Å–ø–µ—Ä—Ç–∞{% elif lang == 'tr' %}Uzman yorumu{% else %}Expert commentary{% endif %}</option>
					</select>
				</div>
			</div>

			<!-- Cases Grid -->
			<div class="cases-grid" id="casesGrid">
				{% set cases = [
					{'id': 1, 'number': 'CASE #12', 'name': 'Muhammadali Mamatov', 'major': 'IT', 'university': 'Istanbul Kent', 'service': 'admission', 'result': '5 kunda qabul ‚Ä¢ 30% chegirma', 'format': 'expert', 'video': True},
					{'id': 2, 'number': 'CASE #15', 'name': 'Aziza Karimova', 'major': 'Tibbiyot', 'university': 'IGU', 'service': 'admission', 'result': '7 kunda qabul ‚Ä¢ 25% chegirma', 'format': 'video', 'video': True},
					{'id': 3, 'number': 'CASE #18', 'name': 'Bobur Mirzaev', 'major': 'Biznes', 'university': 'Atlas', 'service': 'residence', 'result': 'ƒ∞kamet 2 haftada tayyor', 'format': 'expert', 'video': True},
					{'id': 4, 'number': 'CASE #22', 'name': 'Dilshoda Toshmatova', 'major': 'Dizayn', 'university': 'MEF', 'service': 'admission', 'result': '10 kunda qabul ‚Ä¢ 20% chegirma', 'format': 'image', 'video': False},
					{'id': 5, 'number': 'CASE #25', 'name': 'Javohir Karimov', 'major': 'Muhandislik', 'university': 'Okan', 'service': 'visa', 'result': 'Viza masalasi hal qilindi', 'format': 'expert', 'video': True},
					{'id': 6, 'number': 'CASE #28', 'name': 'Farhod Rustamov', 'major': 'Huquq', 'university': 'Bahcesehir', 'service': 'accommodation', 'result': 'Turar-joy 1 haftada topildi', 'format': 'video', 'video': True}
				] %}
				
				{% for case in cases %}
				<div class="case-card" data-case-id="{{ case.id }}" data-service="{{ case.service }}" data-major="{{ case.major|lower }}" data-university="{{ case.university|lower }}" data-format="{{ case.format }}">
					<div class="case-video-preview">
						{% if case.video %}
						<video autoplay muted loop playsinline>
							<source src="/static/video/heroVideo.mp4" type="video/mp4">
						</video>
						{% else %}
						<div class="case-video-placeholder">{{ case.name[0] }}</div>
						{% endif %}
					</div>
					<div class="case-content">
						<div class="case-number">{{ case.number }}</div>
						<h3 class="case-name">{{ case.name }}</h3>
						<div class="case-result">
							<img src="{{ url_for('static', filename='verify.svg') }}" alt="" style="width:15px;height:15px;display:inline-block;vertical-align:-3px;margin-right:4px;filter:invert(31%) sepia(99%) saturate(2288%) hue-rotate(207deg) brightness(93%) contrast(101%);"> {{ case.result }}
						</div>
						<div class="case-info">{{ case.major }}, {{ case.university }} ‚Ä¢ {% if case.format == 'video' %}Video otziv{% elif case.format == 'image' %}Rasm otziv{% else %}Mutaxassis izohi{% endif %}</div>
						<button class="case-view-btn" onclick="openCase({{ case.id }})">
							{% if lang == 'uz' %}Natijani ko'rish{% elif lang == 'ru' %}–°–º–æ—Ç—Ä–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç{% elif lang == 'tr' %}Sonucu g√∂r{% else %}View result{% endif %}
						</button>
					</div>
				</div>
				{% endfor %}
			</div>
		</div>
	</section>

	<!-- Social Proof Block -->
	<section class="py-8 bg-white">
		<div class="max-w-7xl mx-auto px-6">
			<div class="social-proof">
				<h2 class="social-proof-title">{% if lang == 'uz' %}Bizda 10 000+ shu kabi haqiqiy NATIJA mavjud{% elif lang == 'ru' %}–£ –Ω–∞—Å 10 000+ —Ç–∞–∫–∏—Ö —Ä–µ–∞–ª—å–Ω—ã—Ö –†–ï–ó–£–õ–¨–¢–ê–¢–û–í{% elif lang == 'tr' %}10 000+ b√∂yle ger√ßek SONU√á var{% else %}We have 10,000+ such real RESULTS{% endif %}</h2>
				<div class="social-proof-stats">
					<div>
						<div class="stat-number">60+</div>
						<div class="stat-label">{% if lang == 'uz' %}Universitet{% elif lang == 'ru' %}–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–æ–≤{% elif lang == 'tr' %}√úniversite{% else %}Universities{% endif %}</div>
					</div>
					<div>
						<div class="stat-number">1000+</div>
						<div class="stat-label">{% if lang == 'uz' %}ƒ∞kamet{% elif lang == 'ru' %}–í–∏–¥ –Ω–∞ –∂–∏—Ç–µ–ª—å—Å—Ç–≤–æ{% elif lang == 'tr' %}ƒ∞kamet{% else %}Residence{% endif %}</div>
				</div>
					<div>
						<div class="stat-number">100+</div>
						<div class="stat-label">{% if lang == 'uz' %}Viza masalalari{% elif lang == 'ru' %}–í–∏–∑–æ–≤—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤{% elif lang == 'tr' %}Vize sorunlarƒ±{% else %}Visa issues{% endif %}</div>
			</div>
					<div>
						<div class="stat-number">5000+</div>
						<div class="stat-label">{% if lang == 'uz' %}Otzivlar{% elif lang == 'ru' %}–û—Ç–∑—ã–≤–æ–≤{% elif lang == 'tr' %}Yorumlar{% else %}Reviews{% endif %}</div>
					</div>
				</div>
				<p class="social-proof-text">{% if lang == 'uz' %}"Bizning keyingi hikoyamiz ‚Äî balki sizniki bo'lar?"{% elif lang == 'ru' %}"–ù–∞—à–∞ —Å–ª–µ–¥—É—é—â–∞—è –∏—Å—Ç–æ—Ä–∏—è ‚Äî –º–æ–∂–µ—Ç –±—ã—Ç—å, –≤–∞—à–∞?"{% elif lang == 'tr' %}"Bir sonraki hikayemiz ‚Äî belki sizinki?"{% else %}"Our next story ‚Äî maybe yours?"{% endif %}</p>
			</div>
		</div>
	</section>
</div>

<!-- Bottom Sheet (Mobile Only) -->
<div class="bottom-sheet-overlay" id="bottomSheetOverlay"></div>
<div class="bottom-sheet" id="bottomSheet">
	<div class="bottom-sheet-handle"></div>
	<div class="bottom-sheet-header">
		<span class="bottom-sheet-title" id="bsTitle">Case</span>
		<button class="bottom-sheet-close" onclick="closeBottomSheet()">
			<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
				<line x1="18" y1="6" x2="6" y2="18"></line>
				<line x1="6" y1="6" x2="18" y2="18"></line>
			</svg>
		</button>
	</div>
	<div class="bottom-sheet-content" id="bsContent"></div>
</div>

<script>
const caseData = {
	1: { name: 'Muhammadali Mamatov', major: 'Computer Engineering', university: 'Istanbul Kent University', city: 'Istanbul', service: 'Qabul + Hujjatlar', age: 18, expert: 'Akmal Toshmatov', expertRole: 'Senior Admission Consultant', expertText: 'Bu mijozimiz Muhammadali Mamatovga IT yo\'nalishida universitet tanlashdan boshlab qabul xatigacha to\'liq yordam berdik.', testimonial: 'StudyFans jamoasi menga yo\'nalish tanlashda ham, hujjatlarda ham juda ko\'p yordam berdi. 5 kunda qabul xatini oldim!', conclusion: 'Muhammadali uchun eng mos IT yo\'nalishi bo\'yicha variantlarni tanlab berdik, qisqa muddatda qabul xatini olib berdik.' },
	2: { name: 'Aziza Karimova', major: 'Medicine', university: 'IGU', city: 'Istanbul', service: 'Qabul', age: 19, expert: 'Dilshoda Toshmatova', expertRole: 'Admission Specialist', expertText: 'Aziza Karimovaga tibbiyot yo\'nalishida eng yaxshi universitetlarni tanlab berdik.', testimonial: 'Tibbiyot yo\'nalishida qabul olish qiyin edi, lekin StudyFans yordami bilan muvaffaqiyatli qabul oldim!', conclusion: 'Aziza uchun tibbiyot yo\'nalishida eng yaxshi variantlarni tanlab, qabul jarayonini tezlashtirdik.' },
	3: { name: 'Bobur Mirzaev', major: 'Business', university: 'Atlas University', city: 'Istanbul', service: 'ƒ∞kamet', age: 20, expert: 'Javohir Karimov', expertRole: 'Residence Specialist', expertText: 'Bobur Mirzaevning ikamet hujjatlarini to\'g\'ri tayyorlab, jarayonni tezlashtirdik.', testimonial: 'ƒ∞kamet jarayoni juda qiyin ko\'rinardi, lekin StudyFans bilan 2 haftada ikamet oldim.', conclusion: 'Bobur uchun ikamet hujjatlarini to\'g\'ri tayyorlab, jarayonni tezlashtirdik.' },
	4: { name: 'Dilshoda Toshmatova', major: 'Design', university: 'MEF University', city: 'Istanbul', service: 'Qabul', age: 18, expert: 'Farhod Rustamov', expertRole: 'Admission Consultant', expertText: 'Dilshoda uchun dizayn yo\'nalishida eng mos universitetlarni tanlab berdik.', testimonial: 'Dizayn yo\'nalishida qabul olish uchun yordam so\'radim. Juda professional ishladi!', conclusion: 'Dilshoda uchun qabul jarayonini muvaffaqiyatli yakunladik.' },
	5: { name: 'Javohir Karimov', major: 'Engineering', university: 'Okan University', city: 'Istanbul', service: 'Viza', age: 21, expert: 'Muhammadali Mamatov', expertRole: 'Visa Specialist', expertText: 'Javohir Karimovning viza masalasini hal qilib, qabul jarayonini davom ettirdik.', testimonial: 'Viza masalasi bor edi, lekin StudyFans yordami bilan hammasi hal qilindi!', conclusion: 'Viza masalasini hal qilib, qabul jarayonini davom ettirdik.' },
	6: { name: 'Farhod Rustamov', major: 'Law', university: 'Bahcesehir University', city: 'Istanbul', service: 'Turar-joy', age: 19, expert: 'Aziza Karimova', expertRole: 'Accommodation Specialist', expertText: 'Farhod Rustamov uchun qulay va xavfsiz turar-joy topib berdik.', testimonial: 'Turar-joy topish qiyin edi, lekin 1 haftada topildi. Juda qulay joy.', conclusion: 'Qulay va xavfsiz turar-joy topib, 1 haftada hammasini tayyorladik.' }
};

const lang = '{{ lang }}';
const t = {
	expertIntro: lang === 'uz' ? 'Mutaxassis izohi' : lang === 'ru' ? '–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —ç–∫—Å–ø–µ—Ä—Ç–∞' : lang === 'tr' ? 'Uzman yorumu' : 'Expert commentary',
	clientProfile: lang === 'uz' ? 'Mijoz profili' : lang === 'ru' ? '–ü—Ä–æ—Ñ–∏–ª—å –∫–ª–∏–µ–Ω—Ç–∞' : lang === 'tr' ? 'M√º≈üteri profili' : 'Client profile',
	major: lang === 'uz' ? 'Yo\'nalish' : lang === 'ru' ? '–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ' : lang === 'tr' ? 'B√∂l√ºm' : 'Major',
	university: lang === 'uz' ? 'Universitet' : lang === 'ru' ? '–£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç' : lang === 'tr' ? '√úniversite' : 'University',
	city: lang === 'uz' ? 'Shahar' : lang === 'ru' ? '–ì–æ—Ä–æ–¥' : lang === 'tr' ? '≈ûehir' : 'City',
	service: lang === 'uz' ? 'Xizmat' : lang === 'ru' ? '–£—Å–ª—É–≥–∞' : lang === 'tr' ? 'Hizmet' : 'Service',
	age: lang === 'uz' ? 'Yosh' : lang === 'ru' ? '–í–æ–∑—Ä–∞—Å—Ç' : lang === 'tr' ? 'Ya≈ü' : 'Age',
	screenshots: lang === 'uz' ? 'Real skrinshotlar' : lang === 'ru' ? '–°–∫—Ä–∏–Ω—à–æ—Ç—ã' : lang === 'tr' ? 'Ekran g√∂r√ºnt√ºleri' : 'Screenshots',
	clientOpinion: lang === 'uz' ? 'Mijozning fikri' : lang === 'ru' ? '–ú–Ω–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞' : lang === 'tr' ? 'M√º≈üteri g√∂r√º≈ü√º' : 'Client opinion',
	expertConclusion: lang === 'uz' ? 'Mutaxassis xulosasi' : lang === 'ru' ? '–ó–∞–∫–ª—é—á–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä—Ç–∞' : lang === 'tr' ? 'Uzman sonucu' : 'Expert conclusion',
	ctaTitle: lang === 'uz' ? 'Siz ham shunday natija xohlaysizmi?' : lang === 'ru' ? '–•–æ—Ç–∏—Ç–µ —Ç–∞–∫–æ–π –∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç?' : lang === 'tr' ? 'B√∂yle bir sonu√ß ister misiniz?' : 'Want such a result?',
	consultation: lang === 'uz' ? 'Bepul konsultatsiya' : lang === 'ru' ? '–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è' : lang === 'tr' ? '√úcretsiz danƒ±≈ümanlƒ±k' : 'Free consultation'
};

function openCase(id) {
	// Desktop: alohida sahifaga o'tish
	if (window.innerWidth > 768) {
		window.location.href = '/case/' + id + '?lang={{ lang }}';
		return;
	}
	
	// Mobile: bottom sheet ochish
	const c = caseData[id];
	if (!c) return;
	
	document.getElementById('bsTitle').textContent = c.name;
	document.getElementById('bsContent').innerHTML = `
		<div class="bs-section">
			<div class="bs-section-title">${t.expertIntro}: ${c.expert}</div>
			<video class="bs-video" controls>
				<source src="/static/video/heroVideo.mp4" type="video/mp4">
			</video>
			<p class="bs-text">"${c.expertText}"</p>
					</div>
		<div class="bs-section">
			<div class="bs-section-title">${t.clientProfile}</div>
			<div class="bs-profile">
				<div class="bs-profile-name">${c.name}</div>
				<div class="bs-profile-grid">
					<div class="bs-profile-item"><div class="bs-profile-label">${t.major}</div><div class="bs-profile-value">${c.major}</div></div>
					<div class="bs-profile-item"><div class="bs-profile-label">${t.university}</div><div class="bs-profile-value">${c.university}</div></div>
					<div class="bs-profile-item"><div class="bs-profile-label">${t.city}</div><div class="bs-profile-value">${c.city}</div></div>
					<div class="bs-profile-item"><div class="bs-profile-label">${t.service}</div><div class="bs-profile-value">${c.service}</div></div>
					<div class="bs-profile-item"><div class="bs-profile-label">${t.age}</div><div class="bs-profile-value">${c.age}</div></div>
				</div>
			</div>
					</div>
		<div class="bs-section">
			<div class="bs-section-title">${t.screenshots}</div>
			<div class="bs-screenshots">
				<div class="bs-screenshot"><div class="bs-screenshot-icon">üìÑ</div><div class="bs-screenshot-label">Offer Letter</div></div>
				<div class="bs-screenshot"><div class="bs-screenshot-icon">‚úâÔ∏è</div><div class="bs-screenshot-label">Email</div></div>
				<div class="bs-screenshot"><div class="bs-screenshot-icon">üí¨</div><div class="bs-screenshot-label">Chat</div></div>
			</div>
		</div>
		<div class="bs-section">
			<div class="bs-section-title">${t.clientOpinion}</div>
			<div class="bs-testimonial"><p class="bs-testimonial-text">"${c.testimonial}"</p></div>
		</div>
		<div class="bs-section">
			<div class="bs-section-title">${t.expertConclusion}</div>
			<div class="bs-conclusion"><p class="bs-conclusion-text">"${c.conclusion}"</p></div>
		</div>
		<div class="bs-section">
			<div class="bs-cta">
				<div class="bs-cta-title">${t.ctaTitle}</div>
				<div class="bs-cta-buttons">
					<a href="https://wa.me/998901234567" target="_blank" class="bs-cta-btn">WhatsApp</a>
					<a href="https://t.me/studyfans" target="_blank" class="bs-cta-btn">Telegram</a>
					<a href="{{ url_for('contact', lang=lang) }}" class="bs-cta-btn">${t.consultation}</a>
	</div>
			</div>
		</div>
	`;
	
	// Show bottom sheet
	document.getElementById('bottomSheetOverlay').classList.add('active');
	document.getElementById('bottomSheet').classList.add('active');
	document.body.style.overflow = 'hidden';
	
	// Hide mobile nav
	const mobileNav = document.querySelector('nav.fixed.bottom-0');
	if (mobileNav) mobileNav.style.display = 'none';
}

function closeBottomSheet() {
	document.getElementById('bottomSheetOverlay').classList.remove('active');
	document.getElementById('bottomSheet').classList.remove('active');
	document.body.style.overflow = '';
	
	// Show mobile nav
	const mobileNav = document.querySelector('nav.fixed.bottom-0');
	if (mobileNav) mobileNav.style.display = '';
}

// Close on overlay click
document.getElementById('bottomSheetOverlay').addEventListener('click', closeBottomSheet);

// Filter functionality
document.addEventListener('DOMContentLoaded', function() {
	const filters = ['filterService', 'filterMajor', 'filterUniversity', 'filterFormat'];
	const grid = document.getElementById('casesGrid');
	
	function applyFilters() {
		const service = document.getElementById('filterService').value;
		const major = document.getElementById('filterMajor').value;
		const university = document.getElementById('filterUniversity').value;
		const format = document.getElementById('filterFormat').value;
		
		grid.querySelectorAll('.case-card').forEach(card => {
			const matchService = !service || card.dataset.service === service;
			const matchMajor = !major || card.dataset.major.includes(major);
			const matchUniversity = !university || card.dataset.university.includes(university);
			const matchFormat = !format || card.dataset.format === format;
			card.style.display = matchService && matchMajor && matchUniversity && matchFormat ? 'block' : 'none';
		});
	}
	
	filters.forEach(id => {
		const el = document.getElementById(id);
		if (el) el.addEventListener('change', applyFilters);
	});
});
</script>
{% endblock %}
