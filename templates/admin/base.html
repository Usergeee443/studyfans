<!DOCTYPE html>
<html lang="uz">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{% block title %}Admin Panel - Study Fans{% endblock %}</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
	
	<style>
		/* Base Styles */
		html, body {
			margin: 0;
			padding: 0;
			width: 100%;
			height: 100%;
			background: #f9fafb;
			overflow-x: hidden;
		}
		
		/* Sidebar Base Styles */
		#admin-sidebar {
			position: fixed;
			left: 0;
			top: 0;
			bottom: 0;
			width: 224px; /* w-56 = 14rem = 224px */
			background: white;
			border-right: 1px solid #e5e7eb;
			z-index: 50;
			display: flex;
			flex-direction: column;
			transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
		}
		
		/* Sidebar Collapse Styles */
		.sidebar-collapsed {
			width: 72px !important;
		}
		
		.sidebar-text {
			transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), width 0.3s cubic-bezier(0.4, 0, 0.2, 1), margin 0.3s cubic-bezier(0.4, 0, 0.2, 1), padding 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			white-space: nowrap;
			overflow: hidden;
		}
		
		.sidebar-collapsed .sidebar-text {
			opacity: 0;
			width: 0;
			margin: 0;
			padding: 0;
		}
		
		.sidebar-link {
			padding-left: 3.5rem;
			padding-right: 0.75rem;
			transition: padding 0.3s cubic-bezier(0.4, 0, 0.2, 1), justify-content 0.3s cubic-bezier(0.4, 0, 0.2, 1), color 0.2s ease;
			position: relative;
			display: flex;
			align-items: center;
		}
		
		.sidebar-collapsed .sidebar-link {
			justify-content: center;
			padding-left: 0.75rem;
			padding-right: 0.75rem;
		}
		
		.sidebar-icon-wrapper {
			flex-shrink: 0;
			position: absolute;
			left: 0.75rem;
			width: 32px;
			height: 32px;
			margin: 0;
			display: flex;
			align-items: center;
			justify-content: center;
			border-radius: 8px;
		}
		
		.sidebar-collapsed .sidebar-icon-wrapper {
			left: 0.75rem;
			margin: 0;
		}
		
		.sidebar-icon {
			transition: all 0.2s ease;
			flex-shrink: 0;
		}
		
		.sidebar-link:hover {
			color: #2563eb !important;
		}
		
		.sidebar-link:hover .sidebar-icon {
			filter: brightness(0) saturate(100%) invert(40%) sepia(96%) saturate(2476%) hue-rotate(210deg) brightness(98%) contrast(96%);
		}
		
		.sidebar-link.active {
			color: #2563eb !important;
		}
		
		.sidebar-link.active .sidebar-icon {
			filter: brightness(0) saturate(100%) invert(40%) sepia(96%) saturate(2476%) hue-rotate(210deg) brightness(98%) contrast(96%);
		}
		
		.sidebar-logo {
			transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), visibility 0.3s cubic-bezier(0.4, 0, 0.2, 1);
		}
		
		.sidebar-collapsed .sidebar-logo {
			opacity: 0;
			visibility: hidden;
			pointer-events: none;
		}
		
		.sidebar-logo-img {
			transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			padding: 0.25rem;
			max-width: 100%;
			max-height: 100%;
		}
		
		.sidebar-collapsed .sidebar-logo-img {
			opacity: 0;
			transform: scale(0.8);
			pointer-events: none;
		}
		
		.sidebar-toggle-btn {
			position: absolute;
			left: 0.75rem;
			right: auto;
			top: 50%;
			transform: translateY(-50%);
			transition: none;
			width: 32px;
			height: 32px;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		
		.sidebar-collapsed .sidebar-toggle-btn {
			left: 0.75rem;
			right: auto;
		}
		
		.sidebar-collapsed #toggle-icon-close {
			display: none;
		}
		
		.sidebar-collapsed #toggle-icon-open {
			display: block !important;
		}
		
		#admin-sidebar:not(.sidebar-collapsed) #toggle-icon-open {
			display: none !important;
		}
		
		#admin-sidebar:not(.sidebar-collapsed) #toggle-icon-close {
			display: block;
		}
		
		.sidebar-top-section {
			transition: padding 0.3s cubic-bezier(0.4, 0, 0.2, 1), border 0.3s cubic-bezier(0.4, 0, 0.2, 1);
		}
		
		.sidebar-collapsed .sidebar-top-section {
			border-bottom: none !important;
			padding: 1rem;
		}
		
		/* Main Content */
		#admin-main-content {
			margin-left: 224px;
			width: calc(100% - 224px);
			overflow-x: hidden;
			position: relative;
			z-index: 1;
			transition: margin-left 0.3s cubic-bezier(0.4, 0, 0.2, 1), width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			min-height: 100vh;
			background: #f9fafb;
		}
		
		#admin-main-content.sidebar-content-collapsed {
			margin-left: 72px;
			width: calc(100% - 72px);
		}
		
		@media (max-width: 768px) {
			#admin-sidebar {
				display: none;
			}
			
			#admin-main-content {
				margin-left: 0 !important;
				width: 100% !important;
			}
		}
	</style>
</head>
<body>
	<!-- Desktop Sidebar - Left Side -->
	<aside id="admin-sidebar" class="hidden md:flex">
		<!-- Top Section with Logo and Toggle -->
		<div class="sidebar-top-section p-6 border-b border-gray-200 relative flex items-center justify-center" style="min-height: 80px;">
			<button onclick="toggleAdminSidebar()" class="sidebar-toggle-btn z-10 hover:opacity-70 transition-opacity">
				<img id="toggle-icon-close" src="/static/arrow-square-left.svg" alt="Collapse" class="w-5 h-5">
				<img id="toggle-icon-open" src="/static/arrow-square-right.svg" alt="Expand" class="w-5 h-5" style="display: none;">
			</button>
			<a href="{{ url_for('admin_dashboard') }}" class="sidebar-logo flex items-center justify-center absolute left-1/2 -translate-x-1/2">
				<img src="/static/images/01.png" alt="Study Fans Admin" class="w-12 h-12 rounded-xl object-contain transition-all duration-300" onerror="this.style.display='none';">
			</a>
		</div>
		
		<!-- Navigation Links -->
		<nav class="flex-1 p-3 space-y-2 overflow-y-auto">
			<a href="{{ url_for('admin_dashboard') }}" 
				class="sidebar-link flex items-center py-2 text-sm font-normal text-gray-900 relative {% if request.endpoint == 'admin_dashboard' %}active{% endif %}">
				<div class="sidebar-icon-wrapper">
					<img src="/static/home.svg" alt="Dashboard" class="w-5 h-5 sidebar-icon">
				</div>
				<span class="sidebar-text transition-all duration-300">Dashboard</span>
			</a>
			
			<a href="{{ url_for('admin_universities') }}" 
				class="sidebar-link flex items-center py-2 text-sm font-normal text-gray-900 relative {% if request.endpoint in ['admin_universities', 'admin_add_university', 'admin_edit_university'] %}active{% endif %}">
				<div class="sidebar-icon-wrapper">
					<img src="/static/book.svg" alt="Universities" class="w-5 h-5 sidebar-icon">
				</div>
				<span class="sidebar-text transition-all duration-300">Universitetlar</span>
			</a>
			
			<a href="{{ url_for('admin_blog') }}" 
				class="sidebar-link flex items-center py-2 text-sm font-normal text-gray-900 relative {% if request.endpoint in ['admin_blog', 'admin_add_blog', 'admin_edit_blog'] %}active{% endif %}">
				<div class="sidebar-icon-wrapper">
					<img src="/static/clipboard-text.svg" alt="Blog" class="w-5 h-5 sidebar-icon">
				</div>
				<span class="sidebar-text transition-all duration-300">Blog</span>
			</a>
		</nav>
		
		<!-- Bottom Section - Logout -->
		<div class="p-4 border-t border-gray-200">
			<a href="{{ url_for('admin_logout') }}" 
				class="sidebar-link flex items-center py-2 text-sm font-normal text-red-600 relative hover:bg-red-50 rounded-lg px-3">
				<div class="sidebar-icon-wrapper">
					<i class="fas fa-sign-out-alt sidebar-icon"></i>
				</div>
				<span class="sidebar-text ml-3 transition-all duration-300">Chiqish</span>
			</a>
		</div>
	</aside>
	
	<!-- Main Content -->
	<div id="admin-main-content">
		{% block content %}{% endblock %}
	</div>
	
	<script>
		// Sidebar toggle function
		function toggleAdminSidebar() {
			const sidebar = document.getElementById('admin-sidebar');
			const mainContent = document.getElementById('admin-main-content');
			
			if (sidebar && mainContent) {
				const isCollapsed = sidebar.classList.contains('sidebar-collapsed');
				
				if (isCollapsed) {
					// Expanding
					sidebar.classList.remove('sidebar-collapsed');
					mainContent.classList.remove('sidebar-content-collapsed');
					localStorage.setItem('adminSidebarCollapsed', 'false');
				} else {
					// Collapsing
					sidebar.classList.add('sidebar-collapsed');
					mainContent.classList.add('sidebar-content-collapsed');
					localStorage.setItem('adminSidebarCollapsed', 'true');
				}
			}
		}
		
		// Initialize sidebar state on page load
		document.addEventListener('DOMContentLoaded', () => {
			const sidebar = document.getElementById('admin-sidebar');
			const mainContent = document.getElementById('admin-main-content');
			
			if (sidebar && mainContent) {
				// Check if sidebar is collapsed from localStorage
				const isCollapsed = localStorage.getItem('adminSidebarCollapsed') === 'true';
				
				if (isCollapsed) {
					sidebar.classList.add('sidebar-collapsed');
					mainContent.classList.add('sidebar-content-collapsed');
				} else {
					sidebar.classList.remove('sidebar-collapsed');
					mainContent.classList.remove('sidebar-content-collapsed');
				}
			}
		});
	</script>
</body>
</html>

